"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const transactions_1 = require("../transactions");
const marshall_1 = require("@waves/marshall");
const waves_crypto_1 = require("waves-crypto");
const generic_1 = require("../generic");
function cancelLease(paramsOrTx, seed) {
    const type = transactions_1.TRANSACTION_TYPE.CANCEL_LEASE;
    const version = paramsOrTx.version || 2;
    const seedsAndIndexes = generic_1.convertToPairs(seed);
    const senderPublicKey = generic_1.getSenderPublicKey(seedsAndIndexes, paramsOrTx);
    const tx = {
        type,
        version,
        senderPublicKey,
        leaseId: paramsOrTx.leaseId,
        fee: generic_1.fee(paramsOrTx, 100000),
        timestamp: paramsOrTx.timestamp || Date.now(),
        chainId: generic_1.networkByte(paramsOrTx.chainId, 87),
        proofs: paramsOrTx.proofs || [],
        id: '',
    };
    const bytes = marshall_1.binary.serializeTx(tx);
    seedsAndIndexes.forEach(([s, i]) => generic_1.addProof(tx, waves_crypto_1.signBytes(bytes, s), i));
    tx.id = waves_crypto_1.hashBytes(bytes);
    return tx;
}
exports.cancelLease = cancelLease;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FuY2VsLWxlYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3RyYW5zYWN0aW9ucy9jYW5jZWwtbGVhc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrREFBbUg7QUFDbkgsOENBQXdDO0FBQ3hDLCtDQUFtRDtBQUNuRCx3Q0FBMkY7QUE2QzNGLFNBQWdCLFdBQVcsQ0FBQyxVQUFlLEVBQUUsSUFBaUI7SUFDNUQsTUFBTSxJQUFJLEdBQUcsK0JBQWdCLENBQUMsWUFBWSxDQUFDO0lBQzNDLE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sZUFBZSxHQUFHLHdCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsTUFBTSxlQUFlLEdBQUcsNEJBQWtCLENBQUMsZUFBZSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRXhFLE1BQU0sRUFBRSxHQUFxQztRQUMzQyxJQUFJO1FBQ0osT0FBTztRQUNQLGVBQWU7UUFDZixPQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU87UUFDM0IsR0FBRyxFQUFFLGFBQUcsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDO1FBQzVCLFNBQVMsRUFBRSxVQUFVLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUU7UUFDN0MsT0FBTyxFQUFFLHFCQUFXLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7UUFDNUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxNQUFNLElBQUksRUFBRTtRQUMvQixFQUFFLEVBQUUsRUFBRTtLQUNQLENBQUE7SUFFRCxNQUFNLEtBQUssR0FBRyxpQkFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVyQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFRLENBQUMsRUFBRSxFQUFFLHdCQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUUsRUFBRSxDQUFDLEVBQUUsR0FBRyx3QkFBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXpCLE9BQU8sRUFBRSxDQUFBO0FBQ1gsQ0FBQztBQXhCRCxrQ0F3QkMifQ==